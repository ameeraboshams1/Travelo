<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Travelo · Traveler Stories</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap"
        rel="stylesheet">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <style>
        :root {
            --ink: #0f172a;
            --muted: #64748b;
            --accent: #872bff;
            --accent2: #6c63ff;
            --border: #eceff5;
            --halo: rgba(135, 43, 255, .14);
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            margin: 0
        }

        body {
            font-family: "Plus Jakarta Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
            color: var(--ink);
            background: #fff;
            overflow-x: hidden;
        }

                .progress {
            position: fixed;
            inset: 0 0 auto 0;
            height: 4px;
            width: 0;
            z-index: 9999;
            background: linear-gradient(90deg, var(--accent), var(--accent2));
            box-shadow: 0 0 10px rgba(135, 43, 255, .35)
        }

                .hero {
            position: relative;
            height: 380px;
            display: grid;
            place-items: center;
            text-align: center;
            color: #fff;
            overflow: hidden
        }

        .hero::before {
            content: "";
            position: absolute;
            inset: 0;
            background:
                radial-gradient(900px 540px at 10% 10%, rgba(135, 43, 255, .33), transparent 60%),
                radial-gradient(900px 540px at 90% 90%, rgba(108, 99, 255, .28), transparent 60%),
                linear-gradient(180deg, rgba(0, 0, 0, .12), rgba(0, 0, 0, .55)),
                url("https://images.unsplash.com/photo-1518684079-3c830dcef090?auto=format&fit=crop&w=1680&q=80");
            background-size: cover;
            background-position: center
        }

        .hero .wrap {
            position: relative;
            z-index: 1;
            padding: 0 18px
        }

        .hero h1 {
            margin: 0;
            font-size: 54px;
            line-height: 1.04;
            letter-spacing: .2px
        }

        .hero p {
            margin: 10px 0 0;
            font-size: 18px;
            opacity: .96
        }

        @media (max-width:720px) {
            .hero {
                height: 320px
            }

            .hero h1 {
                font-size: 36px
            }
        }

                main {
            max-width: 1280px;
            margin: 42px auto;
            padding: 0 18px
        }

        .stream {
            display: flex;
            flex-direction: column
        }

                .row {
            width: 100%;
            display: grid;
            grid-template-columns: 1.15fr .85fr;
            gap: 36px;
            align-items: center;
            padding: 40px 0;
            border-bottom: 1px solid var(--border);
        }

        .row:last-child {
            border-bottom: none
        }

                .row:nth-child(even) .media {
            order: 2
        }

        .row:nth-child(even) .text {
            order: 1
        }

        @media (max-width:1024px) {
            .row {
                grid-template-columns: 1fr;
                gap: 18px
            }

            .row:nth-child(even) .media,
            .row:nth-child(even) .text {
                order: initial
            }
        }

                .media {
            position: relative;
            min-height: 400px;
            border-radius: 22px;
            overflow: hidden;
            isolation: isolate
        }

        .media img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scale(1.06);
            filter: saturate(1.02) contrast(1.03);
            opacity: 0;
            transition: opacity .6s ease, transform 1.1s ease;
            will-change: transform, opacity
        }

        .media.loaded img {
            opacity: 1;
            transform: scale(1)
        }

                .media::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0) 55%, rgba(0, 0, 0, .13) 100%);
            pointer-events: none
        }

                .text {
            padding: 0 2px
        }

        .kicker {
            display: block;
            margin-bottom: 10px;
            font-weight: 900;
            letter-spacing: .25px;
            color: #3f47a1
        }

        .title {
            margin: 6px 0 8px;
            font-size: 32px;
            line-height: 1.15;
            font-weight: 800;
            letter-spacing: .2px
        }

        .meta {
            display: flex;
            gap: 10px;
            align-items: center;
            color: #667085;
            font-size: 12px;
            font-weight: 800
        }

        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent2))
        }

        .excerpt {
            margin: 14px 0 0;
            color: #1f2937;
            line-height: 1.75;
            font-size: 17px;
            display: -webkit-box;
            line-clamp: 9;
            -webkit-box-orient: vertical;
            overflow: hidden
        }

        .excerpt[data-expanded="true"] {
            line-clamp: unset
        }

        .actions {
            margin-top: 14px;
            display: flex;
            gap: 10px;
            align-items: center
        }

        .btn {
            appearance: none;
            border: 1px solid #e7eaf4;
            background: #fff;
            padding: 10px 14px;
            border-radius: 12px;
            font-weight: 900;
            font-size: 12px;
            cursor: pointer;
            transition: all .2s ease
        }

        .btn:hover {
            border-color: var(--accent);
            box-shadow: 0 0 0 6px var(--halo)
        }

                .reveal {
            opacity: 0;
            transform: translateY(22px);
            transition: opacity .7s ease, transform .7s ease
        }

        .reveal.in {
            opacity: 1;
            transform: translateY(0)
        }

        .parallax {
            will-change: transform
        }

        @media (prefers-reduced-motion:reduce) {
            * {
                animation: none !important;
                transition: none !important
            }
        }

          /* =========================
   Ask AI Floating Button + Bubble
   ========================= */

.ask-ai-btn{
  position: fixed;
  left: 22px;
  bottom: 40px;
  width: 60px;
  height: 60px;
  border: 0;
  border-radius: 999px;
  cursor: pointer;
  z-index: 99999;

  display: flex;
  align-items: center;
  justify-content: center;

  background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.35), transparent 40%),
              linear-gradient(135deg, #7c3aed, #6c63ff);
  box-shadow: 0 16px 40px rgba(124,58,237,.35);
  transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;

  overflow: visible;   /* مهم للبابل */
  padding: 0;
}

.ask-ai-btn i{
  font-size: 24px;
  color: #fff;
  line-height: 1;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.18));
}

.ask-ai-btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 22px 55px rgba(124,58,237,.45);
  filter: brightness(1.03);
}

/* glow */
.ask-ai-btn::after{
  content:"";
  position:absolute;
  inset:-8px;
  border-radius:999px;
  background: radial-gradient(circle, rgba(124,58,237,.35), transparent 60%);
  opacity: 0;
  transform: scale(.9);
  transition: .25s ease;
  pointer-events: none;
}
.ask-ai-btn:hover::after{
  opacity: 1;
  transform: scale(1);
}

/* bubble */
.ask-ai-bubble{
  position: absolute;
  left: calc(100% + 12px);
  top: 50%;
  transform: translateY(-50%) translateX(-6px);

  background: rgba(124, 58, 237, 0.30);
  color: #0f172a;
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 13px;
  white-space: nowrap;

  box-shadow: 0 14px 30px rgba(15,23,42,.18);
  opacity: 0;
  pointer-events: none;
  transition: .2s ease;
}

.ask-ai-bubble::before{
  content:"";
  position:absolute;
  left:-6px;
  top:50%;
  width:10px;
  height:10px;
  background: rgba(124, 58, 237, 0.30);
  transform: translateY(-50%) rotate(45deg);
  border-radius: 2px;
}

.ask-ai-btn:hover .ask-ai-bubble,
.ask-ai-btn:focus-visible .ask-ai-bubble{
  opacity: 1;
  transform: translateY(-50%) translateX(0);
}

.ask-ai-bubble{ opacity:0 !important; }
.ask-ai-btn:hover .ask-ai-bubble{ opacity:1 !important; }

.topbar {
    position: fixed;
    inset: 0 0 auto 0;
    height: 68px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    z-index: 100;
    background: rgba(255, 255, 255, 0);
    border-bottom: 1px solid rgba(255, 255, 255, 0);
}


.topbar-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 64px
}

.brand {
    display: flex;
    gap: 10px;
    align-items: center;
    text-decoration: none
}

.logo {
    width: 28px;
    height: 28px
}

.brand span {
    font-weight: 900;
    color: var(--accent)
}
.top-actions {
    display: flex;
    gap: 8px
}

    </style>
</head>

<body>

    <header class="topbar">
    <div class="container topbar-row">
      <a class="brand" href="index.php" aria-label="Go to Travelo home">
        <img src="./assets/images/logo.svg" alt="Travelo" class="logo">
        <span>Travelo</span>
      </a>
    </div>
    <div class="glow"></div>
  </header>

    <div class="progress" id="progress"></div>

    <header class="hero" aria-label="Traveler Stories">
        <div class="wrap">
            <h1>Traveler Stories</h1>
            <p>Short, human moments that change how we move through the world.</p>
        </div>
    </header>

    <main>
        <div class="stream" id="stream"></div>
    </main>

    <script>

        const STORIES = [
            {
                kicker: "City · Rome",
                title: "Dawn gave me back my voice",
                meta: ["4 min read", "Spanish Steps · Trevi"],
                img: "https://images.unsplash.com/photo-1505764706515-aa95265c5abc?auto=format&fit=crop&w=1600&q=80",
                text: `At 6:00 a.m., Rome apologized for the noise. A woman watered geraniums above me; the street smelled
            like fresh cornetti and soap. I put my phone away and let the city breathe for me. That hour didn’t
            solve anything back home—but it reminded me I still know how to listen.`
            },
            {
                kicker: "Beach · Crete",
                title: "A child’s gift at the shoreline",
                meta: ["3 min read", "Chania harbor"],
                img: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1600&q=80",
                text: `A boy pressed two loose buttons into my palm and said, “Dad fixed these—now his shirt has another day.”
            We laughed, then I almost cried. The tide taught the same lesson: small repairs can save a season.
            We don’t always need new—just kinder hands.`
            },
            {
                kicker: "Nature · Alps",
                title: "The window that kept my secret",
                meta: ["2 min read", "Interlaken → Lauterbrunnen"],
                img: "https://images.unsplash.com/photo-1508264165352-258a6f6b4b38?auto=format&fit=crop&w=1600&q=80",
                text: `Left-side seats hold the valley like a promise. I didn’t take a photo. The mountain answered a question
            I was afraid to ask out loud. Not every proof belongs on a screen; some truths are stronger when they
            stay unposted.`
            },
            {
                kicker: "Airports · Work",
                title: "Ninety minutes fixed a year",
                meta: ["3 min read", "Any terminal"],
                img: "https://images.unsplash.com/photo-1517959105821-eaf2591984c2?auto=format&fit=crop&w=1600&q=80",
                text: `In a noisy gate, I deleted the photos that weren’t me and drafted a message I didn’t send.
            Clarity can be enough. A layover isn’t waiting; it’s a small, rented room where you can put
            your life back in order—one folder at a time.`
            },
            {
                kicker: "City · Tokyo",
                title: "Rain taught me how to arrive",
                meta: ["4 min read", "Shimokitazawa"],
                img: "https://images.unsplash.com/photo-1505062616-30ca95af1d2f?auto=format&fit=crop&w=1600&q=80",
                text: `Neon softened into puddles. I sat at a tiny counter, steam fogging my glasses while the chef
            handed me a bowl like a quiet apology. We didn’t share a language, but gratitude translated
            perfectly. I left slower, finally caught up with myself.`
            },
            {
                kicker: "Family · Zanzibar",
                title: "The tide that made an island",
                meta: ["3 min read", "Indian Ocean"],
                img: "https://images.unsplash.com/photo-1543244937-6d2b63a64e30?auto=format&fit=crop&w=1600&q=80",
                text: `Low tide painted watercolors on sand. We picnicked where ocean would return and promised to keep
            only what we could carry. When the sea walked back, it took our footprints and left the lesson:
            travel light, love heavy.`
            }
        ];

        const FALLBACK = "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=80";

        const stream = document.getElementById('stream');

        STORIES.forEach((s, i) => {
            const row = document.createElement('section');
            row.className = 'row reveal';

            const media = document.createElement('figure');
            media.className = 'media parallax';
            media.dataset.parallax = (0.08 + (i % 3) * 0.02).toFixed(2);

            const img = document.createElement('img');
            img.setAttribute('alt', s.title);
            img.setAttribute('loading', 'lazy');
            img.setAttribute('decoding', 'async');
            img.dataset.src = s.img;
            img.onerror = () => { img.src = FALLBACK; };
            media.appendChild(img);

            const text = document.createElement('article');
            text.className = 'text';

            const kicker = document.createElement('span');
            kicker.className = 'kicker';
            kicker.textContent = s.kicker;

            const title = document.createElement('h2');
            title.className = 'title';
            title.textContent = s.title;

            const meta = document.createElement('div');
            meta.className = 'meta';
            meta.innerHTML = `<span class="dot"></span><span>${s.meta[0]}</span><span>•</span><span>${s.meta[1]}</span>`;

            const excerpt = document.createElement('p');
            excerpt.className = 'excerpt';
            excerpt.id = `ex-${i}`;
            excerpt.textContent = s.text;

            const actions = document.createElement('div');
            actions.className = 'actions';
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Read more';
            btn.addEventListener('click', () => {
                const open = excerpt.getAttribute('data-expanded') === 'true';
                excerpt.setAttribute('data-expanded', open ? 'false' : 'true');
                btn.textContent = open ? 'Read more' : 'Show less';
            });
            actions.appendChild(btn);

            text.append(kicker, title, meta, excerpt, actions);

            row.append(media, text);
            stream.appendChild(row);
        });

                const progress = document.getElementById('progress');
        const setProgress = () => { const h = document.documentElement; const s = h.scrollTop / (h.scrollHeight - h.clientHeight); progress.style.width = (s * 100) + '%'; };
        document.addEventListener('scroll', setProgress, { passive: true }); setProgress();

                const io = new IntersectionObserver((es) => {
            es.forEach(e => { if (e.isIntersecting) { e.target.classList.add('in'); io.unobserve(e.target); } });
        }, { threshold: .18 });
        document.querySelectorAll('.reveal').forEach(el => io.observe(el));

                const lazy = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (!entry.isIntersecting) return;
                const img = entry.target;
                img.src = img.dataset.src;
                img.onload = () => img.closest('.media')?.classList.add('loaded');
                lazy.unobserve(img);
            });
        }, { rootMargin: '250px 0px' });
        document.querySelectorAll('.media img').forEach(img => lazy.observe(img));

                const mediaEls = [...document.querySelectorAll('.parallax')];
        const parallax = () => {
            const wh = window.innerHeight;
            mediaEls.forEach(el => {
                const speed = parseFloat(el.dataset.parallax || 0.08);
                const r = el.getBoundingClientRect();
                if (r.bottom < 0 || r.top > wh) return;
                const center = r.top + r.height / 2 - wh / 2;
                el.style.transform = `translateY(${(-center * speed).toFixed(1)}px)`;
            });
        };
        document.addEventListener('scroll', parallax, { passive: true });
        window.addEventListener('resize', parallax);
        parallax();
    </script>

    <button id="askAiBtn" class="ask-ai-btn" type="button" aria-label="Ask AI">
  <i class="bi bi-airplane-fill" aria-hidden="true"></i>
  <span class="ask-ai-bubble">Ask AI</span>
</button>


<script>
(() => {
  const AGENT_ID = "019b189a507c7f0e98a0580ad136880f79ad";
  const SRC = `https://cdn.jotfor.ms/agent/embedjs/${AGENT_ID}/embed.js`;

  function loadWidget(){
    return new Promise((resolve, reject) => {
      // لو محمّل قبل لا تعيديه
      if (document.querySelector(`script[src="${SRC}"]`)) return resolve();

      const s = document.createElement("script");
      s.src = SRC;
      s.async = true;
      s.onload = resolve;
      s.onerror = () => reject(new Error("Failed to load widget"));
      document.body.appendChild(s);
    });
  }

  function openLauncherWhenReady(timeoutMs = 8000){
    return new Promise((resolve) => {
      const start = Date.now();

      const tryOpen = () => {
        // لانشر Jotform (جربي عدة سلكترات)
        const launcher =
          document.querySelector('button[aria-label*="Ask AI" i]') ||
          document.querySelector('button[aria-label*="Chat" i]') ||
          document.querySelector('[data-testid*="launcher" i]') ||
          document.querySelector('.jotform-ai-launcher, .agent-launcher, .chat-launcher');

        if (launcher) { launcher.click(); resolve(true); return true; }

        if (Date.now() - start > timeoutMs) { resolve(false); return true; }
        return false;
      };

      if (tryOpen()) return;

      const obs = new MutationObserver(() => {
        if (tryOpen()) obs.disconnect();
      });
      obs.observe(document.documentElement, { childList:true, subtree:true });
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("askAiBtn");
    if (!btn) return;

    btn.addEventListener("click", async () => {
      // ✅ اخفي زرّك فورًا بعد أول كبسة
      btn.style.display = "none";

      try{
        await loadWidget();           // ✅ حمّلي الشات بوت الآن (كان مخفي قبل)
        await openLauncherWhenReady(); // ✅ افتحيه تلقائيًا
      }catch(e){
        console.error(e);
        // لو صار خطأ، رجّعي الزر حتى ما يختفي على الفاضي
        btn.style.display = "";
        alert("AI widget failed to load.");
      }
    }, { once:true }); // ✅ يمنع تعدد الكبس/تكرار
  });
})();
</script>
</body>

</html>